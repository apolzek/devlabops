version: "3.7"
services:
  jenkins:
    image: jenkins/jenkins:lts
    user: root
    ports:
      - 8081:8080
      - 50000:50000
    environment:
      - JENKINS_USER=admin
      - JENKINS_PASS=p4ssw0rd
    # ports:
    #   - target: 8080
    #     published: 8081
    #     mode: host
    #   - target: 50000
    #     published: 50000
    #     mode: host
    networks:
      - weavenet
    #   - internal
    volumes:
      - ./jenkins:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
      - /usr/local/bin/docker:/usr/local/bin/docker

networks:
  weavenet:
    name: weavenet
    external: true
#   internal:
#     name: internal
#     external: true
